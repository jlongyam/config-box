/*! config-box v2.5.0 | Copyright (c) 2023 jlongyam | MIT License | https://github.com/jlongyam/config-box */
class ConfigBox{constructor(title,mouse=!1){this.title=title||"CONFIG",this.mouse=mouse}#el={};#create(){let el=createElement("div",{classList:"config-box",draggable:"true"}),el_head=createElement("div",{classList:"config-box_head"}),el_title=createElement("span",{classList:"config-box_title",textContent:this.title}),el_close=createElement("span",{classList:"config-box_close"}),el_body=createElement("div",{classList:"config-box_body"});document.body.appendChild(el),el.appendChild(el_head),el_head.appendChild(el_title),el_head.appendChild(el_close),el.appendChild(el_body),this.#el.root=el,this.#el.head=el_head,this.#el.title=el_title,this.#el.close=el_close,this.#el.body=el_body}#setDimension(fit=!1){if(fit)this.#el.root.style.width="fit-content",this.#el.root.style.height="fit-content";else{let width=getComputedStyle(this.#el.root).getPropertyValue("width"),height=getComputedStyle(this.#el.root).getPropertyValue("height");this.#el.root.style.width=width,this.#el.root.style.height=height}}#listen(){this.mouse?(dragMouse(document.body,this.#el.root,{drag:e=>this.#setDimension()}),this.#el.close.addEventListener("click",(()=>this.#el.root.remove()))):(window.addEventListener("dragover",(e=>e.preventDefault()),!1),this.#el.root.addEventListener("drag",(e=>{e.target.style.left=e.clientX+"px",e.target.style.top=e.clientY+"px",e.target.style.visibility="hidden"})),this.#el.root.addEventListener("dragend",(e=>e.target.style.visibility="visible")),this.#el.close.addEventListener("click",(()=>this.#el.root.remove())))}createText(content="LABEL"){let el_field=createElement("div",{classList:"config-box_field"}),el_text=createElement("span",{classList:"config-box_text",textContent:content});el_field.appendChild(el_text),this.#el.body.appendChild(el_field)}createAction(text,cb){let el_field=createElement("div",{classList:"config-box_field"}),el_action=createElement("span",{classList:"config-box_action",textContent:text});el_field.appendChild(el_action),this.#el.body.appendChild(el_field),el_action.addEventListener("click",cb),this.#setDimension(!0)}inputValue="";createInput(cb){let el_field=createElement("div",{classList:"config-box_field"}),el_input=createElement("span",{classList:"config-box_input",contentEditable:"true",spellcheck:"false"});el_field.appendChild(el_input),this.#el.body.appendChild(el_field),"keyboard"in navigator&&"lock"in navigator.keyboard&&el_input.addEventListener("keydown",(e=>{"Enter"===e.code&&e.preventDefault(),cb&&cb(e.code,el_input.innerHTML),this.inputValue=el_input.innerHTML}))}start(){this.#create(),this.#listen()}setPosition(cfg={left:"100px",top:"100px",right:"auto",bottom:"auto"},fixed=!1){this.#el.root.style.left=cfg.left,this.#el.root.style.top=cfg.top,this.#el.root.style.right=cfg.right,this.#el.root.style.bottom=cfg.bottom,this.#setDimension(),fixed&&this.#el.root.removeAttribute("draggable")}get body(){return this.#el.body}}class ConfigChoose{constructor(parent){this.parent=parent}chooses=[];#values={one:!1,two:!0,three:!1};#choosen="";#active=!1;create(cb){let el_field=createElement("div",{classList:"config-box_field"}),el_choose=createElement("div",{classList:"config-box_choose"});el_field.appendChild(el_choose),this.#values.forEach(((active,item)=>{let el_item=createElement("span",{classList:"config-box_choose-item",textContent:item});el_choose.appendChild(el_item),active&&(el_item.classList.add("active"),this.chooses.push(item)),el_item.addEventListener("click",(()=>{if(el_item.classList.toggle("active"),el_item.classList.contains("active"))this.chooses.includes(item)||this.chooses.push(item),this.#active=!0;else{let i=this.chooses.indexOf(item);this.chooses.splice(i,1),this.#active=!1}this.#choosen=item,cb&&cb(this.#choosen,this.#active)}))})),this.parent.appendChild(el_field)}set value(obj){this.#values=obj}get value(){return this.#values}}class ConfigSwitch{constructor(parent){this.parent=parent}#values={one:!1,two:!0,three:!1};#choosen="";create(cb){let el_field=createElement("div",{classList:"config-box_field"}),el_switch=createElement("div",{classList:"config-box_switch"});el_field.appendChild(el_switch);let el_child=el_switch.children;const chooseOne=o=>{el_child.forEach((i=>{i!=o&&(i.classList.remove("active"),this.#values[i.textContent]=!1)}))};this.#values.forEach(((active,item)=>{let el_item=createElement("span",{classList:"config-box_switch-item",textContent:item});el_switch.appendChild(el_item),active&&el_item.classList.toggle("active"),el_item.addEventListener("click",(()=>{el_item.classList.contains("active")||(el_item.classList.toggle("active"),this.#values[item]=!0),chooseOne(el_item),this.#choosen=item,cb&&cb(this.#choosen)}))})),this.parent.appendChild(el_field)}set value(obj){this.#values=obj}get value(){return this.#values}}
